"use strict";(self.webpackChunktestApp=self.webpackChunktestApp||[]).push([[207],{9461:(z,P,d)=>{d.d(P,{I:()=>h});var b=d(1084),C=d(4438);let h=(()=>{class R{static{this.\u0275fac=function(e){return new(e||R)}}static{this.\u0275mod=C.$C({type:R})}static{this.\u0275inj=C.G2t({imports:[b.c9,b.h_,b.IQ]})}}return R})()},4207:(z,P,d)=>{d.r(P),d.d(P,{CursosModule:()=>Ge});var b=d(8498),C=d(177),h=d(9417),R=d(2941),O=d(4912),T=d(5509),e=d(4438),F=d(1084),$=d(5794),p=d(5357),j=d(6354),x=d(9437),S=d(1626),N=d(1416);let M=(()=>{class n{constructor(t,i){this.http=t,this.getHeaders=i,this.apiCursos=p.i.baseUrl+p.i.curso,this.headers=this.getHeaders.getHeaders()}getCursos(){return this.http.get(this.apiCursos,{headers:this.headers}).pipe((0,j.T)(t=>t),(0,x.W)(t=>{throw t}))}createCurso(t){return t.fecha_inicio=this.formatDate(t.fecha_inicio),t.fecha_fin=this.formatDate(t.fecha_fin),this.http.post(this.apiCursos,t,{headers:this.headers}).pipe((0,j.T)(i=>i),(0,x.W)(i=>{throw i}))}formatDate(t){const i=t.split("-");return`${i[0]}-${i[1].padStart(2,"0")}-${i[2].padStart(2,"0")}`}updateCurso(t){return this.http.put(this.apiCursos+t.id+"/",t,{headers:this.headers}).pipe((0,j.T)(i=>i),(0,x.W)(i=>{throw i}))}deleteCurso(t){return this.http.delete(this.apiCursos+t+"/",{headers:this.headers}).pipe((0,j.T)(i=>i),(0,x.W)(i=>{throw i}))}changeStateCurso(t,i){return this.http.patch(this.apiCursos+t+"/",{estado:i},{headers:this.headers}).pipe((0,j.T)(o=>o),(0,x.W)(o=>{throw o}))}getCursoById(t){return this.http.get(this.apiCursos+t+"/",{headers:this.headers}).pipe((0,j.T)(i=>i),(0,x.W)(i=>{throw i}))}patchLink(t,i){return this.http.patch(this.apiCursos+t+"/",{link:i},{headers:this.headers}).pipe((0,j.T)(o=>o),(0,x.W)(o=>{throw o}))}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(S.Qq),e.KVO(N.y))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var H=d(5112),L=d(1185),B=d(385),v=d(5596),V=d(8834),Y=d(1885),J=d(4013);const A=(n,a)=>["/cursos/solicitudes",n,a];function W(n,a){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.siglas)}}function Q(n,a){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.nombre)}}function K(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG(),c=e.sdS(51);return e.Njj(s.open(c,o.id))}),e.nrm(1,"i",38),e.EFF(2," Crear Formulario "),e.k0s()}}function Z(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.copiarEnlace(o.id))}),e.nrm(1,"i",38),e.EFF(2," Copiar Enlace "),e.k0s()}}function q(n,a){if(1&n&&(e.j41(0,"div",30)(1,"mat-card",31),e.nrm(2,"img",32),e.j41(3,"mat-card-content")(4,"p",33),e.EFF(5),e.k0s(),e.DNE(6,K,3,0,"button",34)(7,Z,3,0,"button",34),e.j41(8,"button",35),e.nrm(9,"i",36),e.EFF(10," Ver Detalles "),e.k0s()()()()),2&n){const t=a.$implicit,i=e.XpG();e.R7$(5),e.JRh(t.nombre),e.R7$(),e.Y8G("ngIf",!t.link||null==t.link),e.R7$(),e.Y8G("ngIf",t.link),e.R7$(),e.Y8G("routerLink",e.l_i(4,A,t.id,i.pasarFormulario(t.id)))}}function ee(n,a){if(1&n){const t=e.RV6();e.j41(0,"span",52),e.bIt("mouseenter",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.hoveredDate=o)})("mouseleave",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.hoveredDate=null)}),e.EFF(1),e.k0s()}if(2&n){const t=a.$implicit,i=a.focused,o=e.XpG(2);e.AVh("focused",i)("range",o.isRange(t))("faded",o.isHovered(t)||o.isInside(t)),e.R7$(),e.SpI(" ",t.day," ")}}function te(n,a){if(1&n){const t=e.RV6();e.j41(0,"span",52),e.bIt("mouseenter",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.hoveredDate=o)})("mouseleave",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.hoveredDate=null)}),e.EFF(1),e.k0s()}if(2&n){const t=a.$implicit,i=a.focused,o=e.XpG(2);e.AVh("focused",i)("range",o.isRange(t))("faded",o.isHovered(t)||o.isInside(t)),e.R7$(),e.SpI(" ",t.day," ")}}function oe(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",39)(1,"h4",40),e.EFF(2,"Formulario"),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){const o=e.eBV(t).dismiss;return e.Njj(o("Cross click"))}),e.k0s()(),e.j41(4,"div",42)(5,"div",10)(6,"div",11)(7,"div",43)(8,"div",44)(9,"input",45,1),e.bIt("dateSelect",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onDateSelection(o))}),e.k0s(),e.DNE(11,ee,2,7,"ng-template",null,2,e.C5r),e.k0s()(),e.j41(13,"div",44),e.nrm(14,"input",46,3),e.j41(16,"button",47),e.bIt("click",function(){e.eBV(t);const o=e.sdS(10);return e.Njj(o.toggle())}),e.nrm(17,"i",48),e.k0s()()(),e.j41(18,"div",11)(19,"div",43)(20,"div",44)(21,"input",45,4),e.bIt("dateSelect",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onDateSelection(o))}),e.k0s(),e.DNE(23,te,2,7,"ng-template",null,2,e.C5r),e.k0s()(),e.j41(25,"div",44),e.nrm(26,"input",49,5),e.j41(28,"button",47),e.bIt("click",function(){e.eBV(t);const o=e.sdS(22);return e.Njj(o.toggle())}),e.nrm(29,"i",48),e.k0s()()()()(),e.j41(30,"div",50)(31,"button",51),e.bIt("click",function(){const o=e.eBV(t).close;return e.XpG().createFormulario(),e.Njj(o("Save click"))}),e.EFF(32,"Crear"),e.k0s()()}if(2&n){const t=e.sdS(12),i=e.XpG();e.R7$(9),e.Y8G("autoClose","outside")("displayMonths",2)("dayTemplate",t)("startDate",i.fromDate),e.R7$(5),e.Y8G("value",i.formatter.format(i.fromDate)),e.R7$(7),e.Y8G("autoClose","outside")("displayMonths",2)("dayTemplate",t)("startDate",i.toDate),e.R7$(5),e.Y8G("value",i.formatter.format(i.toDate))}}let ie=(()=>{class n{constructor(t,i,o,s,c,r,l,m){this.router=i,this.modalService=o,this.toast=s,this.cursosService=c,this.universidadService=r,this.planTrabajoService=l,this.formularioService=m,this.calendar=(0,e.WQX)(F.iF),this.formatter=(0,e.WQX)(F.tN),this.hoveredDate=null,this.fromDate=this.calendar.getToday(),this.toDate=this.calendar.getNext(this.calendar.getToday(),"d",10),this.listuniversidades=[],this.cursos=[],this.formularios=[],this.newcurso={id:"",nombre:"",modalidad:"",fecha_inicio:"",fecha_fin:"",estado:!0},this.newformulario={fecha_inicio:"",fecha_fin:"",estado:!0,curso_id:""},this.formulariosCreados={},this.link="",t.backdrop="static",t.keyboard=!1}ngOnInit(){this.getUniversidades(),this.getCursos(),this.getPlanTrabajo(),this.updateFormularioDates();const t=localStorage.getItem("formulariosCreados");t&&(this.formulariosCreados=JSON.parse(t)),this.formularioService.getFormularios().subscribe(o=>{this.formularios=o},o=>{console.error(o)});const i=this.calendar.getToday();this.newcurso.fecha_inicio=`${i.year}-${this.pad(i.month)}-${this.pad(i.day)}`,this.newcurso.fecha_fin=`${i.year}-${this.pad(i.month)}-${this.pad(i.day)}`,this.fromDate=i,this.toDate=i}pad(t){return t<10?"0"+t:t.toString()}open(t,i){this.newformulario.curso_id=i,this.modalService.open(t)}logFechaInicio(){console.log("Fecha Inicio:",this.newcurso.fecha_inicio)}getUniversidades(){this.universidadService.getUniversidades().subscribe(t=>{console.log(t),this.listuniversidades=t},t=>{console.error(t)})}getCursos(){this.cursosService.getCursos().subscribe(t=>{console.log(t),this.cursos=t},t=>{console.error(t)})}createCurso(){this.cursosService.createCurso(this.newcurso).subscribe(t=>{console.log(t),this.getCursos()},t=>{console.error(t)})}createFormulario(){this.formularioService.createFormulario(this.newformulario).subscribe(t=>{console.log(t),this.getCursos(),this.formulariosCreados[this.newformulario.curso_id]=!0,localStorage.setItem("formulariosCreados",JSON.stringify(this.formulariosCreados)),this.link=`${window.location.origin}/inscripcion-curso/${t.id}/${t.fecha_inicio}/${t.fecha_fin}`,this.cursosService.patchLink(this.newformulario.curso_id,this.link).subscribe(()=>{const i=this.cursos.find(o=>o.id===this.newformulario.curso_id);i&&(i.link=this.link)})},t=>{console.error(t)})}copiarEnlace(t){const i=this.formularios.find(o=>o.curso?.id===t);if(i){const o=`${window.location.origin}/#/inscripcion-curso/${i.id}/${i.fecha_inicio}/${i.fecha_fin}`;navigator.clipboard.writeText(o).then(()=>{this.toast.success("Enlace copiado al portapapeles")}).catch(s=>{this.toast.error("Actualiza tu navegador para copiar el enlace")})}else this.toast.error("Actualiza tu navegador para copiar el enlace")}pasarFormulario(t){const i=this.formularios.find(o=>o.curso?.id===t);return this.idFormulario=i?.id,this.idFormulario}onDateSelection(t){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&t&&t.after(this.fromDate)?this.toDate=t:(this.toDate=null,this.fromDate=t):this.fromDate=t,this.updateFormularioDates()}isHovered(t){return this.fromDate&&!this.toDate&&this.hoveredDate&&t.after(this.fromDate)&&t.before(this.hoveredDate)}isInside(t){return this.toDate&&t.after(this.fromDate)&&t.before(this.toDate)}isRange(t){return t.equals(this.fromDate)||this.toDate&&t.equals(this.toDate)||this.isInside(t)||this.isHovered(t)}updateFormularioDates(){this.fromDate&&(this.newformulario.fecha_inicio=this.formatter.format(this.fromDate)),this.toDate&&(this.newformulario.fecha_fin=this.formatter.format(this.toDate))}getPlanTrabajo(){this.planTrabajoService.getPlanTrabajo().subscribe(t=>{console.log(t),this.planTrabajo=t},t=>{console.error(t)})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(F.LY),e.rXU(b.Ix),e.rXU(F.Bq),e.rXU($.tw),e.rXU(M),e.rXU(H.k),e.rXU(L.a),e.rXU(B.q))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-control-cursos"]],decls:52,vars:14,consts:[["content",""],["fromDatepicker","ngbDatepicker"],["t",""],["dpFromDate",""],["toDatepicker","ngbDatepicker"],["dpToDate",""],["iconName","bell-ringing",3,"cardTitle"],[1,"cardWithShadow"],[2,"text-align","right"],[3,"buttonClick","showFirstButton","showSecondButton","iconName","buttonTitle","title","buttonText"],[1,"row"],[1,"col-md-6"],["for","nombre",1,"form-label","fw-bold"],["type","text","name","nombre","id","nombre","placeholder","Ciencia de Datos",1,"form-control",3,"ngModelChange","ngModel"],["for","convenio",1,"form-label","fw-bold"],["name","convenio","id","convenio",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","plan_trabajo",1,"form-label","fw-bold"],["name","plan_trabajo","id","plan_trabajo",1,"form-control"],["value",""],["for","fecha_inicio",1,"form-label","fw-bold"],["type","date","name","fecha_inicio","id","fecha_inicio",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_fin",1,"form-label","fw-bold"],["type","date","name","fecha_fin","id","fecha_fin",1,"form-control",3,"ngModelChange","ngModel"],["name","convenio","id","convenio",1,"form-control",3,"ngModelChange","ngModel"],["value","Virtual"],["value","Presencial"],["value","Semipresencial"],["class","col-md-3",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-3"],[1,"cardWithShadow","customBorderRadius"],["src","../../../../assets/images/svgs/fondo-icon.svg","alt","card de curso"],[1,"titles-2","fw-semibold","text-center","mt-2"],["mat-raised-button","","class","w-100 button-cards-2",3,"click",4,"ngIf"],["mat-raised-button","",1,"w-100","button-cards","mt-3",3,"routerLink"],[1,"fa-solid","fa-eye","text-light","me-2"],["mat-raised-button","",1,"w-100","button-cards-2",3,"click"],[1,"fa-regular","fa-circle-check","text-light","me-2"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"dp-hidden","position-absolute"],[1,"input-group"],["name","datepicker","ngbDatepicker","","outsideDays","hidden","tabindex","-1",1,"form-control",3,"dateSelect","autoClose","displayMonths","dayTemplate","startDate"],["placeholder","yyyy-mm-dd","name","dpFromDate","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-calendar-days"],["placeholder","yyyy-mm-dd","name","dpToDate","readonly","",1,"form-control",3,"value"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(i,o){if(1&i){const s=e.RV6();e.nrm(0,"app-reusable-card",6),e.j41(1,"mat-card",7)(2,"mat-card-content")(3,"div",8)(4,"app-reusable-modal",9),e.bIt("buttonClick",function(){return e.eBV(s),e.Njj(o.createCurso())}),e.j41(5,"div",10)(6,"div",11)(7,"label",12),e.EFF(8,"Nombre del curso"),e.k0s(),e.j41(9,"input",13),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.newcurso.nombre,r)||(o.newcurso.nombre=r),e.Njj(r)}),e.k0s()(),e.j41(10,"div",11)(11,"label",14),e.EFF(12,"Convenio"),e.k0s(),e.j41(13,"select",15)(14,"option"),e.EFF(15,"Selecione la Universidad"),e.k0s(),e.DNE(16,W,2,2,"option",16),e.k0s()()(),e.j41(17,"div",10)(18,"div",11)(19,"label",17),e.EFF(20,"Plan de Trabajo"),e.k0s(),e.j41(21,"select",18)(22,"option",19),e.EFF(23,"Selecciona el Plan"),e.k0s(),e.DNE(24,Q,2,2,"option",16),e.k0s()(),e.j41(25,"div",11)(26,"label",20),e.EFF(27,"Fecha de inicio"),e.k0s(),e.j41(28,"input",21),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.newcurso.fecha_inicio,r)||(o.newcurso.fecha_inicio=r),e.Njj(r)}),e.k0s()()(),e.j41(29,"div",10)(30,"div",11)(31,"label",22),e.EFF(32,"Fecha de Fin"),e.k0s(),e.j41(33,"input",23),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.newcurso.fecha_fin,r)||(o.newcurso.fecha_fin=r),e.Njj(r)}),e.k0s()(),e.j41(34,"div",11)(35,"label",14),e.EFF(36,"Modalidad"),e.k0s(),e.j41(37,"select",24),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.newcurso.modalidad,r)||(o.newcurso.modalidad=r),e.Njj(r)}),e.j41(38,"option",19),e.EFF(39,"Selecciona la modalidad"),e.k0s(),e.j41(40,"option",25),e.EFF(41,"Virtual"),e.k0s(),e.j41(42,"option",26),e.EFF(43,"Presencial"),e.k0s(),e.j41(44,"option",27),e.EFF(45,"Semipresencial"),e.k0s()()()()()(),e.nrm(46,"br")(47,"br"),e.j41(48,"div",10),e.DNE(49,q,11,7,"div",28),e.k0s()()(),e.DNE(50,oe,33,10,"ng-template",null,0,e.C5r)}2&i&&(e.Y8G("cardTitle","Control de cursos"),e.R7$(4),e.Y8G("showFirstButton",!0)("showSecondButton",!1)("iconName","circle-plus")("buttonTitle","Agregar")("title","Agregar un Curso")("buttonText","Guardar"),e.R7$(5),e.R50("ngModel",o.newcurso.nombre),e.R7$(7),e.Y8G("ngForOf",o.listuniversidades),e.R7$(8),e.Y8G("ngForOf",o.planTrabajo),e.R7$(4),e.R50("ngModel",o.newcurso.fecha_inicio),e.R7$(5),e.R50("ngModel",o.newcurso.fecha_fin),e.R7$(4),e.R50("ngModel",o.newcurso.modalidad),e.R7$(12),e.Y8G("ngForOf",o.cursos))},dependencies:[C.Sq,C.bT,b.Wk,v.RN,v.m2,V.$z,h.xH,h.y7,h.me,h.wz,h.BC,h.vS,Y.v,J.w,F.cw],styles:[".customBorderRadius[_ngcontent-%COMP%]{border-radius:20px}.button-cards[_ngcontent-%COMP%]{background-color:#00a5d7;color:#fff}.button-cards-2[_ngcontent-%COMP%]{background-color:#276ca1;color:#fff}.dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]})}}return n})();var y=d(8847);let U=(()=>{class n{constructor(t,i){this.http=t,this.getHeaders=i,this.headers=this.getHeaders.getHeaders()}getCargos(){return this.http.get(p.i.baseUrl+p.i.cargo,{headers:this.headers})}getTipoProfesional(){return this.http.get(p.i.baseUrl+p.i.categoriaProfesional,{headers:this.headers})}getRoles(){return this.http.get(p.i.baseUrl+p.i.roles,{headers:this.headers})}getUniversidades(){return this.http.get(p.i.baseUrl+p.i.universidades,{headers:this.headers})}getEspecialidades(){return this.http.get(p.i.baseUrl+p.i.especialidades,{headers:this.headers})}getTipoDocumento(){return this.http.get(p.i.baseUrl+p.i.tipoDocumento,{headers:this.headers})}getSedeAdjudicacion(){return this.http.get(p.i.baseUrl+p.i.sedeAdjudicacion,{headers:this.headers})}getCentroAsistencial(){return this.http.get(p.i.baseUrl+p.i.centroAsistencial,{headers:this.headers})}getNiveles(){return this.http.get(p.i.baseUrl+p.i.niveles,{headers:this.headers})}getEntidad(){return this.http.get(p.i.baseUrl+p.i.entidad,{headers:this.headers})}getPlaza(){return this.http.get(p.i.baseUrl+p.i.plaza,{headers:this.headers})}getCoordinador(){return this.http.get(p.i.baseUrl+p.i.coordinadores,{headers:this.headers})}getGrupoProfesional(){return this.http.get(p.i.baseUrl+p.i.grupoProfesional,{headers:this.headers})}getEstablecimientos(){return this.http.get(p.i.baseUrl+p.i.establecimientoRPA,{headers:this.headers})}getGruposOcupacionales(){return this.http.get(p.i.baseUrl+p.i.grupoOcupacional,{headers:this.headers})}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(S.Qq),e.KVO(N.y))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var w=d(2765),X=d(467),f=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(f||{});class ne{constructor(){this.byteCount=a=>encodeURI(a).split(/%..|./).length-1}getOrientation(a){return new Promise((t,i)=>{try{const o=new FileReader;o.onload=()=>{const s=new DataView(o.result);if(!s.byteLength||65496!==s.getUint16(0,!1))return t(f.NotDefined);const c=s.byteLength;let r=2;for(;r<c;){const l=s.getUint16(r,!1);if(r+=2,65505===l){if(1165519206!==s.getUint32(r+=2,!1))return t(f.NotJpeg);const m=18761===s.getUint16(r+=6,!1);r+=s.getUint32(r+4,m);const _=s.getUint16(r,m);r+=2;for(let u=0;u<_;u++)if(274===s.getUint16(r+12*u,m))return t(s.getUint16(r+12*u+8,m))}else{if(65280&~l)break;r+=s.getUint16(r,!1)}}return t(f.NotJpeg)},o.readAsArrayBuffer(a)}catch{return i(f.Default)}})}uploadFile(a,t=!0,i=!1){return new Promise((o,s)=>{const c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(c||r).then(l=>l?this.generateUploadInputNative(window.document,t,i):this.generateUploadInputRenderer(a,t,i)).then(l=>{const m=l?Array.from(l):[],_=m.map(k=>this.getOrientation(k)),u=m.map(k=>this.fileToDataURL(k));let g=[];Promise.all(_).then(k=>(g=k,Promise.all(u))).then(k=>{const E=k.map((I,D)=>({image:I.dataUrl,orientation:g[D],fileName:I.fileName}));o(t?E:E[0])})}).catch(l=>s(l))})}fileToDataURL(a){return new Promise((t,i)=>{const o=new FileReader;o.onload=s=>{t({dataUrl:s.target.result,fileName:a.name})};try{o.readAsDataURL(a)}catch(s){i(`ngx-image-compress - probably no file have been selected: ${s}`)}})}generateUploadInputRenderer(a,t=!0,i=!1){let o=!1;return new Promise((s,c)=>{const r=a.createElement("input");a.setStyle(r,"display","none"),a.setProperty(r,"type","file"),a.setProperty(r,"accept","image/*, .heic"),t&&a.setProperty(r,"multiple","true"),a.listen(r,"click",l=>{l.target.value=""}),a.listen(r,"change",l=>{o=!0,s(l.target.files)}),i&&window.addEventListener("focus",()=>{setTimeout(()=>{o||c(new Error("file upload on blur - no file selected"))},300)},{once:!0}),r.click()})}generateUploadInputNative(a,t=!0,i=!1){let o=!1;return new Promise((s,c)=>{const r=a.createElement("input");r.id="upload-input"+new Date,r.style.display="none",r.setAttribute("type","file"),r.setAttribute("accept","image/*, .heic"),t&&r.setAttribute("multiple","true"),a.body.appendChild(r),r.addEventListener("change",()=>{o=!0,s(r.files),a.body.removeChild(a.getElementById(r.id))},{once:!0}),i&&window.addEventListener("focus",()=>{setTimeout(()=>{!o&&a.getElementById(r.id)&&(c(new Error("file upload on blur - no file selected")),a.body.removeChild(a.getElementById(r.id)))},300)},{once:!0}),r.click()})}compress(a,t,i,o=50,s=50,c=0,r=0){return new Promise(function(l,m){s/=100,o/=100;const _=new Image;_.onload=()=>{const u=i.createElement("canvas"),g=u.getContext("2d");if(!g)return m("No canvas context available");let k=_.naturalWidth,E=_.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(t===f.Right||t===f.Left)){const Ne=k;k=E,E=Ne}o=Math.min(o,c?c/k:1,r?r/E:1),u.width=k*o,u.height=E*o;const G=Math.PI/180;CSS.supports("image-orientation","from-image")||t===f.Up?g.drawImage(_,0,0,u.width,u.height):t===f.Right?(g.save(),g.rotate(90*G),g.translate(0,-u.width),g.drawImage(_,0,0,u.height,u.width),g.restore()):t===f.Left?(g.save(),g.rotate(-90*G),g.translate(-u.width,0),g.drawImage(_,0,0,u.height,u.width),g.restore()):t===f.Down?(g.save(),g.rotate(180*G),g.translate(-u.width,-u.height),g.drawImage(_,0,0,u.width,u.height),g.restore()):g.drawImage(_,0,0,u.width,u.height);const Te=a.substr(5,a.split(";")[0].length-5),$e=u.toDataURL(Te,s);l($e)},_.onerror=u=>m(u),_.src=a})}uploadGetImageMaxSize(a,t,i,o=!1){var s=this;return(0,X.A)(function*(){t&&console.debug("Ngxthis - Opening upload window");const c=yield s.uploadFile(i,!1,o);return yield s.getImageMaxSize(c,a,t,i)})()}getImageMaxSize(a,t,i,o){var s=this;return(0,X.A)(function*(){const r=m=>(m/1024/1024).toFixed(2);let l;i&&console.debug("Ngxthis - Opening upload window");for(let m=0;m<10;m++){const _=s.byteCount(a.image);l=yield s.compress(a.image,a.orientation,o,50,100);const u=s.byteCount(l);if(console.debug("Ngxthis -","Compression from",r(_),"MB to",r(u),"MB"),u>=_)throw 0===m?(i&&console.debug("Ngxthis -","File can't be reduced at all - returning the original",r(_),"MB large"),{...a,image:l}):(i&&console.debug("Ngxthis -","File can't be reduced more - returning the best we can, which is ",r(_),"MB large"),{...a,image:l});if(u<1024*t*1024)return i&&console.debug("Ngxthis -","Here your file",r(u),"MB large"),{...a,image:l};if(9===m)throw i&&console.debug("Ngxthis -","File can't reach the desired size after",10,"tries. Returning file ",r(_),"MB large"),{...a,image:l};i&&console.debug("Ngxthis -","Reached",r(u),"MB large. Trying another time after",m+1,"times"),a.image=l}throw i&&console.debug("Ngxthis - Unexpected error"),{}})()}}let se=(()=>{class n{constructor(t){this.DOC_ORIENTATION=f,this.render=t.createRenderer(null,null),this.imageCompress=new ne}byteCount(t){return this.imageCompress.byteCount(t)}getOrientation(t){return this.imageCompress.getOrientation(t)}uploadFile(){return this.imageCompress.uploadFile(this.render,!1)}uploadMultipleFiles(){return this.imageCompress.uploadFile(this.render,!0)}uploadFileOrReject(){return this.imageCompress.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return this.imageCompress.uploadFile(this.render,!0,!0)}compressFile(t,i,o=50,s=50,c=0,r=0){return this.imageCompress.compress(t,i,this.render,o,s,c,r)}uploadAndGetImageWithMaxSize(t=1,i=!1,o=!1){return this.imageCompress.uploadGetImageMaxSize(t,i,this.render,o).then(s=>s.image).catch(s=>{throw s.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,i=!1,o=!1){return this.imageCompress.uploadGetImageMaxSize(t,i,this.render,o)}getImageWithMaxSizeAndMetas(t,i=1,o=!1){return this.imageCompress.getImageMaxSize(t,i,o,this.render)}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(e._9s))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),re=(()=>{class n{constructor(t,i){this.http=t,this.imageCompress=i,this.backendUrl="http://localhost:3000"}getSignedUrl(t,i){return this.http.get(`${this.backendUrl}/get-signed-url?filename=${t}&contentType=${i}`)}uploadFileToR2(t,i){return this.http.put(t,i,{headers:{"Content-Type":i.type}})}resizeImage(t,i,o){return new Promise((s,c)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{this.imageCompress.compressFile(r.result,i,o,50).then(l=>{fetch(l).then(m=>m.blob()).then(s)},l=>c(l))},r.onerror=l=>c(l)})}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(S.Qq),e.KVO(se))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae=d(4180);function ce(n,a){if(1&n){const t=e.RV6();e.j41(0,"td",21)(1,"input",30),e.bIt("change",function(o){e.eBV(t);const s=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.onFileSelected(o,s))}),e.k0s()()}if(2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("disabled",!t.isEditing)}}function le(n,a){if(1&n&&(e.j41(0,"a",32),e.EFF(1," Ver "),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.Y8G("href",t.link,e.B4B)}}function de(n,a){if(1&n&&(e.j41(0,"td",21),e.DNE(1,le,2,1,"a",31),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.link)}}function ue(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.updatePostulanteSeleccionado(o))}),e.EFF(1," Guardar "),e.k0s()}}function pe(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.enableEditing(o))}),e.EFF(1," Editar "),e.k0s()}}function he(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",19)(2,"mat-checkbox",20),e.bIt("change",function(o){const s=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.onCheckboxChange(s.id,o.checked))}),e.EFF(3),e.k0s()(),e.j41(4,"td",21),e.EFF(5),e.k0s(),e.j41(6,"td",21),e.EFF(7),e.k0s(),e.j41(8,"td",21),e.EFF(9),e.k0s(),e.j41(10,"td",21),e.EFF(11),e.k0s(),e.j41(12,"td",21),e.EFF(13),e.k0s(),e.j41(14,"td",21),e.EFF(15),e.k0s(),e.j41(16,"td",21),e.EFF(17),e.k0s(),e.j41(18,"td",21),e.EFF(19),e.k0s(),e.j41(20,"td",21),e.EFF(21),e.k0s(),e.j41(22,"td",21)(23,"input",22),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit;return e.DH7(s.asistencia,o)||(s.asistencia=o),e.Njj(o)}),e.k0s()(),e.j41(24,"td",21)(25,"input",22),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit;return e.DH7(s.notas,o)||(s.notas=o),e.Njj(o)}),e.k0s()(),e.j41(26,"td",23)(27,"label",24)(28,"input",25),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit;return e.DH7(s.certificado_estado,o)||(s.certificado_estado=o),e.Njj(o)}),e.k0s(),e.nrm(29,"span",26),e.k0s()(),e.DNE(30,ce,2,1,"td",27)(31,de,2,1,"td",27),e.j41(32,"td",21),e.DNE(33,ue,2,0,"button",28)(34,pe,2,0,"button",29),e.k0s()()}if(2&n){const t=a.$implicit,i=a.index,o=e.XpG(2);e.R7$(3),e.SpI(" ",i+1," "),e.R7$(2),e.JRh(t.codigo_planilla),e.R7$(2),e.JRh(t.documento),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.apellido),e.R7$(2),e.JRh(t.regimen_laboral),e.R7$(2),e.JRh(t.telefono),e.R7$(2),e.JRh(t.correo),e.R7$(2),e.JRh(t.profesion),e.R7$(2),e.JRh(o.getEstablecimientoNombre(t.establecimiento_RPA)),e.R7$(2),e.R50("ngModel",t.asistencia),e.Y8G("disabled",!t.isEditing),e.R7$(2),e.R50("ngModel",t.notas),e.Y8G("disabled",!t.isEditing),e.R7$(3),e.R50("ngModel",t.certificado_estado),e.Y8G("disabled",!t.isEditing),e.R7$(2),e.Y8G("ngIf",!t.link||null==t.link||""==t.link),e.R7$(),e.Y8G("ngIf",t.link),e.R7$(2),e.Y8G("ngIf",t.isEditing),e.R7$(),e.Y8G("ngIf",!t.isEditing)}}function me(n,a){if(1&n&&(e.j41(0,"table",15)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"#"),e.k0s(),e.j41(5,"th",16),e.EFF(6,"C\xf3digo"),e.k0s(),e.j41(7,"th",16),e.EFF(8,"Documento"),e.k0s(),e.j41(9,"th",16),e.EFF(10,"Nombre"),e.k0s(),e.j41(11,"th",16),e.EFF(12,"Apellido"),e.k0s(),e.j41(13,"th",16),e.EFF(14,"R\xe9gimen"),e.k0s(),e.j41(15,"th",16),e.EFF(16,"Tel\xe9fono"),e.k0s(),e.j41(17,"th",16),e.EFF(18,"Correo"),e.k0s(),e.j41(19,"th",16),e.EFF(20,"Profesi\xf3n"),e.k0s(),e.j41(21,"th",16),e.EFF(22,"Hospital"),e.k0s(),e.j41(23,"th",17),e.EFF(24,"Asistencia"),e.k0s(),e.j41(25,"th",16),e.EFF(26,"Nota"),e.k0s(),e.j41(27,"th",16),e.EFF(28,"Certificado "),e.k0s(),e.j41(29,"th",16),e.EFF(30,"Ev. Cert."),e.k0s(),e.j41(31,"th",16),e.EFF(32,"Opc"),e.k0s()()(),e.j41(33,"tbody"),e.DNE(34,he,35,20,"tr",18),e.k0s()()),2&n){const t=e.XpG();e.R7$(34),e.Y8G("ngForOf",t.postulantes)}}function ge(n,a){1&n&&(e.j41(0,"div",35),e.EFF(1," No hay participantes. "),e.k0s())}let _e=(()=>{class n{constructor(t,i,o,s,c,r){this.postulacionService=t,this.router=i,this.toastr=o,this.modalService=s,this.fileUploadService=c,this.establecimientoService=r,this.postulantes=[],this.postulantesRechazados=[],this.cursoId="",this.formularioId="",this.postulacionesAceptados=[],this.postulantesOriginal=[],this.selectedIds=[],this.selectedFiles=[],this.isDragging=!1,this.establecimientos={},this.searchTerm=""}ngOnInit(){this.getEstablecimientos()}getEstablecimientos(){this.establecimientoService.getEstablecimientoRpa().subscribe(t=>{t.forEach(i=>{this.establecimientos[i.id]=i.nombre})},t=>console.error(t))}goToHistorial(){this.postulacionService.setPostulantesRechazados(this.postulantesRechazados),this.router.navigate([`/cursos/historial/${this.cursoId}/${this.formularioId}`])}getEstablecimientoNombre(t){return this.establecimientos[t]||"Desconocido"}onCheckboxChange(t,i){if(i)this.selectedIds.push(t);else{const o=this.selectedIds.indexOf(t);o>-1&&this.selectedIds.splice(o,1)}console.log("Selected IDs:",this.selectedIds)}rechazarPostulaciones(){const t={id_curso:this.cursoId,ids_postulacion:this.selectedIds};console.log("Rechazar postulantes:",t),this.postulacionService.rechazarPostulacion(t).subscribe(i=>{this.patchRetiro(this.selectedIds),this.toastr.success("Postulaciones a sido Inhabilitado "),this.postulantes=this.postulantes.filter(o=>!this.selectedIds.includes(o.id)),this.selectedIds=[]},i=>console.log("Error",i))}patchRetiro(t){t.forEach(i=>{this.postulacionService.PatchRetiro(i).subscribe(o=>{this.toastr.success("Postulaci\xf3n actualizada")},o=>console.error("Error al actualizar la postulaci\xf3n",o))})}open(t){this.modalService.open(t)}onFileSelected(t,i){const o=t.target.files[0];o&&(o.type.startsWith("image")?this.fileUploadService.resizeImage(o,1024,1024).then(s=>{const c=new File([s],o.name,{type:o.type});this.uploadFile(c,i)}).catch(s=>{console.error("Error al redimensionar la imagen",s),this.toastr.error("Error al redimensionar la imagen","Error")}):this.uploadFile(o,i))}uploadFile(t,i){this.fileUploadService.getSignedUrl(t.name,t.type).subscribe(o=>{const s=o.signedUrl;this.fileUploadService.uploadFileToR2(s,t).subscribe(()=>{console.log("Archivo subido exitosamente"),this.toastr.success("Archivo subido exitosamente","\xc9xito"),i.link=s.split("?")[0],this.updatePostulanteSeleccionado(i)},c=>{console.error("Error al subir el archivo",c),this.toastr.error("Error al subir el archivo","Error")})},o=>{console.error("Error al obtener la URL firmada",o),this.toastr.error("Error al obtener la URL firmada","Error")})}enableEditing(t){t.isEditing=!0}updatePostulanteSeleccionado(t){if(!t)return void this.toastr.error("El postulante no puede ser nulo o indefinido","Error");const i={asistencia:t.asistencia,notas:t.notas,certificado_estado:t.certificado_estado||!0,...t.link&&{link:t.link}};this.postulacionService.updatePostulacion(t.id,i).subscribe(o=>{this.toastr.success("Postulante seleccionado actualizado exitosamente"),t.isEditing=!1},o=>{console.error("Error al actualizar el postulante seleccionado",o),this.toastr.error("Error al actualizar el postulante seleccionado","Error")})}onSearchTermChange(){const t=this.searchTerm.toLowerCase();this.postulantes=t?this.postulantesOriginal.filter(i=>{const o=`${i.nombre||""} ${i.apellido||""}`.toLowerCase(),s=i.documento.toLowerCase()||"",c=i.codigo_planilla.toLowerCase()||"";return o.includes(t)||s.includes(t)||c.includes(t)}):[...this.postulantesOriginal]}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(y.R),e.rXU(b.Ix),e.rXU($.tw),e.rXU(F.Bq),e.rXU(re),e.rXU(ae.l))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-postulantes-seleccionados"]],inputs:{postulantes:"postulantes",postulantesRechazados:"postulantesRechazados",cursoId:"cursoId",formularioId:"formularioId"},decls:20,vars:3,consts:[["noDataTemplate",""],[1,"d-flex","justify-content-between"],["mat-raised-button","",1,"btn","btn-success","border","border-success","text-success","fw-bold",3,"click"],[1,"fa-solid","fa-record-vinyl","me-2"],["mat-raised-button","",1,"btn","btn-primary","border","border-danger","text-danger",3,"click"],[1,"fa-solid","fa-user-slash","me-2","text-danger"],[1,"row","mt-3"],[1,"col-md-6"],[1,"example-input","position-relative"],["type","text","placeholder","Buscar por C\xf3digo, Documento, Nombre y Apellido",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"btn","btn-primary",2,"position","absolute","right","0","top","0"],[1,"fas","fa-search"],[1,"mt-3",2,"overflow-x","auto"],[1,"table-responsive"],["class","table table-striped",4,"ngIf","ngIfElse"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","align-middle"],[3,"change"],[1,"align-middle"],["type","number","min","10","max","20","maxlength","2","placeholder","00",1,"nota","text-center",3,"ngModelChange","ngModel","disabled"],[1,"text-center","align-middle"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"slider","round"],["class","align-middle",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],["type","file","accept","image/*,application/pdf",3,"change","disabled"],["target","_blank","class","btn btn-primary",3,"href",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"href"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"],["role","alert",1,"alert","alert-info","text-center","mt-4","fw-semibold"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"mat-card")(1,"mat-card-content")(2,"div",1)(3,"button",2),e.bIt("click",function(){return e.eBV(s),e.Njj(o.goToHistorial())}),e.nrm(4,"i",3),e.EFF(5," Historial "),e.k0s(),e.j41(6,"button",4),e.bIt("click",function(){return e.eBV(s),e.Njj(o.rechazarPostulaciones())}),e.nrm(7,"i",5),e.EFF(8," Inhabilitar "),e.k0s()(),e.j41(9,"div",6)(10,"div",7)(11,"div",8)(12,"input",9),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.searchTerm,r)||(o.searchTerm=r),e.Njj(r)}),e.bIt("input",function(){return e.eBV(s),e.Njj(o.onSearchTermChange())}),e.k0s(),e.j41(13,"button",10),e.nrm(14,"i",11),e.k0s()()()(),e.j41(15,"div",12)(16,"div",13),e.DNE(17,me,35,1,"table",14),e.k0s(),e.DNE(18,ge,2,0,"ng-template",null,0,e.C5r),e.k0s()()()}if(2&i){const s=e.sdS(19);e.R7$(12),e.R50("ngModel",o.searchTerm),e.R7$(5),e.Y8G("ngIf",o.postulantes.length>0)("ngIfElse",s)}},dependencies:[C.Sq,C.bT,w.So,v.RN,v.m2,V.$z,h.me,h.Q0,h.Zm,h.BC,h.tU,h.VZ,h.zX,h.vS],styles:['.toggle-container[_ngcontent-%COMP%]{position:relative;width:80px;height:40px;margin:20px}.toggle-checkbox[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;background-color:#f44336;border-radius:50px;transition:background-color .4s;box-shadow:inset 0 0 10px #0003}.toggle-button[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:32px;height:32px;background-color:#fff;border-radius:50%;transition:left .4s ease;box-shadow:0 4px 8px #00000026}.toggle-checkbox[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:#4caf50}.toggle-checkbox[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{left:44px}.toggle-label[_ngcontent-%COMP%]:before{position:absolute;left:14px;top:8px;font-size:1.5rem;color:#fff;transition:opacity .4s}.toggle-checkbox[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:before{left:auto;right:14px}.file-upload-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;padding:20px}.file-drop-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:10px;padding:20px;text-align:center;color:#999;font-family:Arial,sans-serif;cursor:pointer;background-color:#f9f9f9;transition:background-color .3s}.file-drop-area.dragover[_ngcontent-%COMP%]{background-color:#f1f1f1}.file-button[_ngcontent-%COMP%]{padding:8px 15px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-family:Arial,sans-serif;font-size:14px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:15px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#eee;padding:10px;margin-bottom:5px;border-radius:5px}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#4caf50}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider[_ngcontent-%COMP%]{background-color:#f44336}.slider.round[_ngcontent-%COMP%]{border-radius:24px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.nota[_ngcontent-%COMP%]{border-radius:10px}']})}}return n})();const fe=["postulantesList"],be=()=>["/cursos/control"];function Ce(n,a){1&n&&(e.j41(0,"div")(1,"div",20)(2,"p"),e.EFF(3,"Cargando..."),e.k0s()()())}function ke(n,a){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-postulantes-seleccionados",21),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("postulantes",t.truePostulaciones)("postulantesRechazados",t.falsePostulaciones)("cursoId",t.cursoId)("formularioId",t.formularioId)}}function Fe(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",34)(2,"mat-checkbox",35,4),e.bIt("change",function(o){const s=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onCheckboxChange(s.id,o.checked))}),e.EFF(4),e.k0s()(),e.j41(5,"td",36)(6,"button",37),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(3),c=e.sdS(24);return e.Njj(s.openAndCheck(c,o.id))}),e.nrm(7,"i",38),e.k0s()(),e.j41(8,"td",36),e.EFF(9),e.k0s(),e.j41(10,"td",36),e.EFF(11),e.k0s(),e.j41(12,"td",36),e.EFF(13),e.k0s(),e.j41(14,"td",36),e.EFF(15),e.k0s(),e.j41(16,"td",36),e.EFF(17),e.k0s(),e.j41(18,"td",36),e.EFF(19),e.k0s(),e.j41(20,"td",36),e.EFF(21),e.k0s(),e.j41(22,"td",36),e.EFF(23),e.k0s(),e.j41(24,"td",36),e.EFF(25),e.k0s(),e.j41(26,"td",36),e.EFF(27),e.k0s(),e.j41(28,"td",36),e.EFF(29),e.k0s()()}if(2&n){const t=a.$implicit,i=a.index,o=e.XpG(3);e.R7$(4),e.SpI(" ",(o.currentPage-1)*o.itemsPerPage+i+1," "),e.R7$(5),e.JRh(t.codigo_planilla),e.R7$(2),e.JRh(t.documento),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.apellido),e.R7$(2),e.JRh(t.regimen_laboral),e.R7$(2),e.JRh(t.telefono),e.R7$(2),e.JRh(t.correo),e.R7$(2),e.JRh(t.profesion),e.R7$(2),e.JRh(o.getEstablecimientoNombre(t.establecimiento_RPA)),e.R7$(2),e.JRh(o.getGrupoOcupacionalNombre(t.grupo_ocupacional)),e.R7$(2),e.JRh(o.getCargoNombre(t.cargo))}}function ve(n,a){if(1&n){const t=e.RV6();e.j41(0,"mat-card")(1,"mat-card-content")(2,"div",6),e.nrm(3,"div",7),e.j41(4,"div",7)(5,"div",15)(6,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.aceptarPostulaciones())}),e.nrm(7,"i",23),e.j41(8,"span",24),e.EFF(9),e.k0s()(),e.j41(10,"button",25),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.recharzarPostulaciones())}),e.nrm(11,"i",23),e.j41(12,"span",24),e.EFF(13),e.k0s()()()()(),e.j41(14,"div",26)(15,"table",27)(16,"thead")(17,"tr")(18,"th"),e.EFF(19,"#"),e.k0s(),e.j41(20,"th",28),e.EFF(21,"Obs"),e.k0s(),e.j41(22,"th",28),e.EFF(23,"C\xf3digo"),e.k0s(),e.j41(24,"th",28),e.EFF(25,"Documento"),e.k0s(),e.j41(26,"th",28),e.EFF(27,"Nombre"),e.k0s(),e.j41(28,"th",28),e.EFF(29,"Apellido"),e.k0s(),e.j41(30,"th",28),e.EFF(31,"R\xe9gimen"),e.k0s(),e.j41(32,"th",28),e.EFF(33,"Tel\xe9fono"),e.k0s(),e.j41(34,"th",28),e.EFF(35,"Correo"),e.k0s(),e.j41(36,"th",28),e.EFF(37,"Profesi\xf3n"),e.k0s(),e.j41(38,"th",28),e.EFF(39,"Hospital"),e.k0s(),e.j41(40,"th",28),e.EFF(41,"Grupo Ocupacional"),e.k0s(),e.j41(42,"th",28),e.EFF(43,"Cargo"),e.k0s()()(),e.j41(44,"tbody"),e.DNE(45,Fe,30,12,"tr",29),e.k0s()()(),e.j41(46,"div",30)(47,"ngb-pagination",31),e.mxI("pageChange",function(o){e.eBV(t);const s=e.XpG(2);return e.DH7(s.currentPage,o)||(s.currentPage=o),e.Njj(o)}),e.bIt("pageChange",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.refreshPostulantes())}),e.k0s(),e.j41(48,"select",32),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.DH7(s.itemsPerPage,o)||(s.itemsPerPage=o),e.Njj(o)}),e.bIt("ngModelChange",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.refreshPostulantes())}),e.j41(49,"option",33),e.EFF(50,"20"),e.k0s(),e.j41(51,"option",33),e.EFF(52,"50"),e.k0s(),e.j41(53,"option",33),e.EFF(54,"60"),e.k0s()()()()()}if(2&n){const t=e.XpG(2);e.R7$(9),e.SpI(" ",t.isAccepting?"Aceptando...":"Aceptar"," "),e.R7$(4),e.SpI(" ",t.isRejecting?"Rechazando...":"Rechazar"," "),e.R7$(32),e.Y8G("ngForOf",t.paginatedPostulaciones),e.R7$(2),e.Y8G("collectionSize",t.totalPages),e.R50("page",t.currentPage),e.Y8G("pageSize",t.itemsPerPage),e.R7$(),e.R50("ngModel",t.itemsPerPage),e.R7$(),e.Y8G("ngValue",20),e.R7$(2),e.Y8G("ngValue",40),e.R7$(2),e.Y8G("ngValue",60)}}function je(n,a){if(1&n&&e.DNE(0,ke,2,4,"div",19)(1,ve,55,10,"ng-template",null,3,e.C5r),2&n){const t=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.noHayPostulaciones())("ngIfElse",t)}}function xe(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",39)(1,"h4",40),e.EFF(2,"Actualizar Fecha del Formulario"),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){const o=e.eBV(t).dismiss;return e.Njj(o("Cross click"))}),e.k0s()(),e.j41(4,"div",42)(5,"div",6)(6,"div",7)(7,"div",43)(8,"label",44),e.EFF(9,"Fecha Inicio"),e.k0s(),e.j41(10,"input",45),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.formulario.fecha_inicio,o)||(s.formulario.fecha_inicio=o),e.Njj(o)}),e.k0s()()(),e.j41(11,"div",7)(12,"div",43)(13,"label",46),e.EFF(14,"Fecha Fin"),e.k0s(),e.j41(15,"input",47),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.formulario.fecha_fin,o)||(s.formulario.fecha_fin=o),e.Njj(o)}),e.k0s()()()()(),e.j41(16,"div",48)(17,"button",49),e.bIt("click",function(){const o=e.eBV(t).close;return e.XpG().actualizarFormulario(),e.Njj(o("Save click"))}),e.EFF(18,"Actualizar"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.formulario.fecha_inicio),e.R7$(5),e.R50("ngModel",t.formulario.fecha_fin)}}function Ee(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",39)(1,"h4",40),e.EFF(2,"Agregar alg\xfan comentario"),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){const o=e.eBV(t).dismiss;return e.Njj(o("Cross click"))}),e.k0s()(),e.j41(4,"div",42)(5,"div",6)(6,"div",50)(7,"div",43)(8,"label",51),e.EFF(9,"Observaci\xf3n"),e.k0s(),e.j41(10,"textarea",52),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.observaciones,o)||(s.observaciones=o),e.Njj(o)}),e.k0s()()()()(),e.j41(11,"div",48)(12,"button",49),e.bIt("click",function(){const o=e.eBV(t).close;return e.XpG().recharzarPostulaciones(),e.Njj(o("Save click"))}),e.EFF(13,"Rechazar"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.observaciones)}}let Re=(()=>{class n{constructor(t,i,o,s,c,r,l){this.route=i,this.postulacionService=o,this.formularioService=s,this.cursoService=c,this.dataService=r,this.modalService=l,this.cursoId="",this.formularioId="",this.nameCurso="",this.observaciones="",this.formulario={fecha_inicio:"",fecha_fin:"",estado:!0,curso_id:""},this.postulaciones=[],this.paginatedPostulaciones=[],this.truePostulaciones=[],this.falsePostulaciones=[],this.postulacionesSeleccionadas=[],this.selectedIds=[],this.isLoading=!0,this.isAccepting=!1,this.isRejecting=!1,this.currentPage=1,this.itemsPerPage=20,this.totalPages=0,this.establecimientosMap={},this.gruposOcupacionalesMap={},this.cargosMap={},t.backdrop="static",t.keyboard=!1}ngOnInit(){this.loadData(),this.formulario.curso_id=this.route.snapshot.paramMap.get("id")??"",this.formularioId=this.route.snapshot.paramMap.get("idFormulario")??"",this.loadFormulario(),this.cursoId=this.formulario.curso_id,this.loadCursos(),this.dataService.getEstablecimientos().subscribe(t=>{this.establecimientosMap=this.mapDataById(t)}),this.dataService.getGruposOcupacionales().subscribe(t=>{this.gruposOcupacionalesMap=this.mapDataById(t)}),this.dataService.getCargos().subscribe(t=>{this.cargosMap=this.mapDataById(t)})}refreshPostulantes(){this.paginatedPostulaciones=this.postulaciones.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage),this.totalPages=Math.ceil(this.postulaciones.length/this.itemsPerPage)}loadData(){setTimeout(()=>{this.postulacionesSeleccionadas=this.postulaciones,this.isLoading=!1},800)}loadFormulario(){this.formularioService.getFormularioById(this.formularioId).subscribe(t=>{this.formulario=t,this.postulaciones=(t.postulacion||[]).filter(i=>!i.estado&&!i.is_rejected),this.truePostulaciones=(t.postulacion||[]).filter(i=>i.estado&&!i.is_rejected),this.falsePostulaciones=(t.postulacion||[]).filter(i=>!i.estado&&i.is_rejected),this.totalPages=Math.ceil(this.postulaciones.length/this.itemsPerPage),this.loadPage(this.currentPage)})}loadPage(t){const i=(t-1)*this.itemsPerPage;this.paginatedPostulaciones=this.postulaciones.slice(i,i+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadPage(this.currentPage))}prevPage(){this.currentPage>1&&(this.currentPage--,this.loadPage(this.currentPage))}loadCursos(){this.cursoService.getCursoById(this.cursoId).subscribe(t=>{this.nameCurso=t.nombre})}cargarFormulario(){this.formularioService.getFormularioById(this.formularioId).subscribe(t=>{this.formulario.fecha_inicio=t.fecha_inicio,this.formulario.fecha_fin=t.fecha_fin,this.formulario.estado=t.estado,this.formulario.curso_id=t.curso.id},t=>{console.error("Error al cargar el formulario",t)})}actualizarFormulario(){const t={fecha_inicio:this.formulario.fecha_inicio,fecha_fin:this.formulario.fecha_fin,estado:this.formulario.estado,curso_id:this.cursoId};console.log("Formulario actualizado",t),this.formularioService.updateFormulario(this.formularioId,t).subscribe(i=>{console.log("Formulario actualizado",i)},i=>{console.error("Error al actualizar el formulario",i)})}open(t){this.modalService.open(t)}openAndCheck(t,i){this.modalService.open(t),this.onCheckboxChange(i,!0)}onCheckboxChange(t,i){if(i)this.selectedIds.push(t);else{const o=this.selectedIds.indexOf(t);o>-1&&this.selectedIds.splice(o,1)}console.log("Selected IDs:",this.selectedIds)}aceptarPostulaciones(){this.isAccepting=!0,this.postulacionService.aceptarPostulacion({id_curso:this.cursoId,ids_postulacion:this.selectedIds}).subscribe(i=>{console.log("Postulaciones aceptadas",i),this.loadFormulario(),this.isAccepting=!1,window.location.reload()},i=>{console.error("Error al aceptar postulaciones",i),this.isAccepting=!1})}recharzarPostulaciones(){this.isRejecting=!0;const t=this.selectedIds.reduce((o,s)=>(o[s]=this.observaciones||"",o),{}),i={id_curso:this.cursoId,postulaciones:t};console.log("Rechazando postulaciones",i),this.postulacionService.rechazarPostulacion(i).subscribe(o=>{console.log("Postulaciones rechazadas",o),this.loadFormulario(),this.observaciones=""},o=>{console.error("Error al rechazar postulaciones",o)}),setTimeout(()=>{this.isRejecting=!1},1500)}noHayPostulaciones(){return 0===this.postulacionesSeleccionadas.length}mapDataById(t){return t.reduce((i,o)=>(i[o.id]=o.nombre,i),{})}getEstablecimientoNombre(t){return this.establecimientosMap[t]||"Desconocido"}getGrupoOcupacionalNombre(t){return this.gruposOcupacionalesMap[t]||"Desconocido"}getCargoNombre(t){return this.cargosMap[t]||"Desconocido"}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(F.LY),e.rXU(b.nX),e.rXU(y.R),e.rXU(B.q),e.rXU(M),e.rXU(U),e.rXU(F.Bq))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-gestion-solicitudes"]],viewQuery:function(i,o){if(1&i&&e.GBs(fe,5),2&i){let s;e.mGM(s=e.lsd())&&(o.postulantesList=s.first)}},decls:25,vars:5,consts:[["contentTemplate",""],["content",""],["obs",""],["postulacionesTemplate",""],["checkbox",""],[1,"cardWithShadow",3,"click"],[1,"row"],[1,"col-md-6"],[1,"d-flex"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"routerLink"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"col-md-4"],[1,"d-flex","justify-content-end"],[1,"btn","border","border-primary",3,"click"],[1,"fa-solid","fa-pen-to-square","text-primary"],[1,"text-primary","fw-bold"],[4,"ngIf","ngIfElse"],[1,"loading-message"],[3,"postulantes","postulantesRechazados","cursoId","formularioId"],[1,"btn","btn-success","border-2","me-5",3,"click"],[1,"fa-solid","fa-circle-question","me-2","text-light"],[1,"text-light","fw-bold"],[1,"btn","btn-danger","border-2","me-5",3,"click"],[1,"mt-3",2,"overflow-x","auto"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"pageChange","collectionSize","page","pageSize"],[1,"form-select",2,"width","auto",3,"ngModelChange","ngModel"],[3,"ngValue"],["scope","row",1,"text-center","align-middle"],[3,"change"],[1,"align-middle"],[1,"btn","btn-outline-primary",3,"click"],[1,"fa-solid","fa-eye","text-primary"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","fecha"],["type","date","id","fecha","placeholder","Fecha","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["for","fecha_fin"],["type","date","id","fecha_fin",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"col-md-12"],["for","observacion"],["id","observacion","placeholder","Motivo del rechazo",1,"form-control","mt-2",3,"ngModelChange","ngModel"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"mat-card",5),e.bIt("click",function(r){return e.eBV(s),e.Njj(r.stopPropagation())}),e.j41(1,"mat-card-content")(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"button",10),e.nrm(7,"i",11),e.k0s()(),e.nrm(8,"div",9),e.j41(9,"mat-card-title",12),e.EFF(10),e.k0s()()(),e.nrm(11,"div",13),e.j41(12,"div",14)(13,"div",15)(14,"button",16),e.bIt("click",function(){e.eBV(s);const r=e.sdS(22);return e.Njj(o.open(r))}),e.nrm(15,"i",17),e.j41(16,"span",18),e.EFF(17," Actualizar Fecha"),e.k0s()()()()()()(),e.DNE(18,Ce,4,0,"div",19)(19,je,3,2,"ng-template",null,0,e.C5r)(21,xe,19,2,"ng-template",null,1,e.C5r)(23,Ee,14,1,"ng-template",null,2,e.C5r)}if(2&i){const s=e.sdS(20);e.R7$(6),e.Y8G("routerLink",e.lJ4(4,be)),e.R7$(4),e.SpI("Curso de ",o.nameCurso,""),e.R7$(8),e.Y8G("ngIf",o.isLoading)("ngIfElse",s)}},dependencies:[C.Sq,C.bT,b.Wk,w.So,v.RN,v.m2,v.dh,h.xH,h.y7,h.me,h.wz,h.BC,h.vS,F.s5,_e]})}}return n})();function Pe(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",23)(2,"mat-checkbox",24),e.bIt("change",function(o){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onCheckboxChange(s.id,o.checked))}),e.EFF(3),e.k0s()(),e.j41(4,"td",25),e.EFF(5),e.k0s(),e.j41(6,"td",25),e.EFF(7),e.k0s(),e.j41(8,"td",25),e.EFF(9),e.k0s(),e.j41(10,"td",25),e.EFF(11),e.k0s(),e.j41(12,"td",25),e.EFF(13),e.k0s(),e.j41(14,"td",25),e.EFF(15),e.k0s(),e.j41(16,"td",25),e.EFF(17),e.k0s(),e.j41(18,"td",25),e.EFF(19),e.k0s(),e.j41(20,"td",25),e.EFF(21),e.k0s(),e.j41(22,"td",25),e.EFF(23),e.k0s(),e.j41(24,"td",25),e.EFF(25),e.k0s(),e.j41(26,"td",26)(27,"label",27),e.nrm(28,"input",28)(29,"span",29),e.k0s()(),e.j41(30,"td",25)(31,"button",30),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(),c=e.sdS(59);return e.Njj(s.open(c,o))}),e.nrm(32,"i",31),e.k0s()()()}if(2&n){const t=a.$implicit,i=a.index,o=e.XpG();e.R7$(3),e.SpI(" ",i+1," "),e.R7$(2),e.JRh(t.codigo_planilla),e.R7$(2),e.JRh(t.documento),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.apellido),e.R7$(2),e.JRh(t.regimen_laboral),e.R7$(2),e.JRh(t.telefono),e.R7$(2),e.JRh(t.correo),e.R7$(2),e.JRh(t.profesion),e.R7$(2),e.JRh(o.getEstablecimientoNombre(t.establecimiento_RPA)),e.R7$(2),e.JRh(o.getGrupoOcupacionalNombre(t.grupo_ocupacional)),e.R7$(2),e.JRh(o.getCargoNombre(t.cargo)),e.R7$(3),e.Y8G("checked",t.is_rejected)}}function Ie(n,a){1&n&&(e.j41(0,"div",32),e.EFF(1," No hay participantes. "),e.k0s())}function Se(n,a){if(1&n){const t=e.RV6();e.j41(0,"textarea",40),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedPostulacion.observaciones,o)||(s.selectedPostulacion.observaciones=o),e.Njj(o)}),e.k0s()}if(2&n){const t=e.XpG(2);e.R50("ngModel",t.selectedPostulacion.observaciones)}}function Me(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",33)(1,"h4",34),e.EFF(2,"Observaci\xf3n"),e.k0s(),e.j41(3,"button",35),e.bIt("click",function(){const o=e.eBV(t).dismiss;return e.Njj(o("Cross click"))}),e.k0s()(),e.j41(4,"div",36),e.DNE(5,Se,1,1,"textarea",37),e.k0s(),e.j41(6,"div",38)(7,"button",39),e.bIt("click",function(){const o=e.eBV(t).close;return e.Njj(o("Save click"))}),e.EFF(8,"Salir"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",t.selectedPostulacion)}}const ye=[{path:"",children:[{path:"control",component:ie},{path:"historial/:id/:idFormulario",component:(()=>{class n{constructor(t,i,o,s,c,r,l){this.modalService=i,this.route=o,this.postulacionService=s,this.router=c,this.dataService=r,this.cursoService=l,this.postulacion=[],this.originalPostulaciones=[],this.selectedPostulacion=null,this.cursoId="",this.formularioId="",this.nameCurso="",this.selectedIds=[],this.searchTerm="",this.filterRetiro="all",this.formulario={fecha_inicio:"",fecha_fin:"",estado:!0,curso_id:""},this.establecimientosMap={},this.gruposOcupacionalesMap={},this.cargosMap={},t.backdrop="static",t.keyboard=!1}ngOnInit(){this.formulario.curso_id=this.route.snapshot.paramMap.get("id")??"",this.formularioId=this.route.snapshot.paramMap.get("idFormulario")??"",this.cursoId=this.formulario.curso_id,this.loadCursos(),this.postulacionService.postulantesRechazados$.subscribe(t=>{this.postulacion=t,this.originalPostulaciones=t,console.log("Postulantes Rechazados:",this.postulacion)}),this.dataService.getEstablecimientos().subscribe(t=>{this.establecimientosMap=this.mapDataById(t)}),this.dataService.getGruposOcupacionales().subscribe(t=>{this.gruposOcupacionalesMap=this.mapDataById(t)}),this.dataService.getCargos().subscribe(t=>{this.cargosMap=this.mapDataById(t)})}goToCurso(){this.router.navigate([`/cursos/solicitudes/${this.cursoId}/${this.formularioId}`])}loadCursos(){console.log("Curso ID:",this.formulario.curso_id),this.cursoService.getCursoById(this.cursoId).subscribe(t=>{this.nameCurso=t.nombre})}onCheckboxChange(t,i){if(i)this.selectedIds.push(t);else{const o=this.selectedIds.indexOf(t);o>-1&&this.selectedIds.splice(o,1)}console.log("Selected IDs:",this.selectedIds)}mapDataById(t){return t.reduce((i,o)=>(i[o.id]=o.nombre,i),{})}getEstablecimientoNombre(t){return this.establecimientosMap[t]||"Desconocido"}getGrupoOcupacionalNombre(t){return this.gruposOcupacionalesMap[t]||"Desconocido"}getCargoNombre(t){return this.cargosMap[t]||"Desconocido"}filterPostulaciones(){const t=this.searchTerm.trim().toLowerCase();this.postulacion=t?this.originalPostulaciones.filter(i=>{const o=`${i.nombre.toLowerCase()} ${i.apellido.toLowerCase()}`,s=`${i.apellido.toLowerCase()} ${i.nombre.toLowerCase()}`;return i.codigo_planilla.toLowerCase().includes(t)||i.documento.toLowerCase().includes(t)||o.includes(t)||s.includes(t)}):[...this.originalPostulaciones]}open(t,i){this.selectedPostulacion=i,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{console.log(`Closed with: ${o}`)},o=>{console.log(`Dismissed ${this.getDismissReason(o)}`)})}getDismissReason(t){return"Cross click"===t?"by clicking on a cross":`with: ${t}`}filterByRetiro(t){this.filterRetiro=t.target.value,this.filterPostulaciones()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(F.LY),e.rXU(F.Bq),e.rXU(b.nX),e.rXU(y.R),e.rXU(b.Ix),e.rXU(U),e.rXU(M))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-historial-curso"]],inputs:{postulacion:"postulacion"},decls:60,vars:3,consts:[["noDataTemplate",""],["content",""],[1,"cardWithShadow",3,"click"],[1,"row"],[1,"col-md-6"],[1,"d-flex"],[1,"me-2"],[1,"border","border-white","fondo-flechas","rounded-circle",3,"click"],[1,"fa-solid","fa-arrow-left","flechas"],[1,"titles"],[1,"col-md-2"],[1,"col-md-4"],[1,"d-flex","justify-content-end"],[1,"d-flex","justify-content-between"],[1,"col-md-5"],[1,"input-group","mb-3"],["type","text","placeholder","Buscar c\xf3digo, documento, nombre o apellido","ria-label","Buscar","aria-describedby","basic-addon1",1,"form-control",3,"ngModelChange","input","ngModel"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-search"],[1,"mt-3",2,"overflow-x","auto"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","align-middle"],[3,"change"],[1,"align-middle"],[1,"text-center","align-middle"],[1,"switch"],["type","checkbox",3,"checked"],[1,"slider","round"],[1,"btn","btn-link",3,"click"],[1,"fa-solid","fa-eye"],["role","alert",1,"alert","alert-info","text-center","mt-4","fw-semibold"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["name","tarea","id","tarea","class","form-control","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","tarea","id","tarea","disabled","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"mat-card",2),e.bIt("click",function(r){return e.eBV(s),e.Njj(r.stopPropagation())}),e.j41(1,"mat-card-content")(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"button",7),e.bIt("click",function(){return e.eBV(s),e.Njj(o.goToCurso())}),e.nrm(7,"i",8),e.k0s()(),e.nrm(8,"div",6),e.j41(9,"mat-card-title",9),e.EFF(10),e.k0s()()(),e.nrm(11,"div",10),e.j41(12,"div",11),e.nrm(13,"div",12),e.k0s()()()(),e.j41(14,"mat-card")(15,"mat-card-content")(16,"div",13)(17,"div",14)(18,"div",15)(19,"input",16),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(o.searchTerm,r)||(o.searchTerm=r),e.Njj(r)}),e.bIt("input",function(){return e.eBV(s),e.Njj(o.filterPostulaciones())}),e.k0s(),e.j41(20,"button",17),e.nrm(21,"i",18),e.k0s()()()(),e.j41(22,"div",19)(23,"table",20)(24,"thead")(25,"tr")(26,"th"),e.EFF(27,"#"),e.k0s(),e.j41(28,"th",21),e.EFF(29,"C\xf3digo"),e.k0s(),e.j41(30,"th",21),e.EFF(31,"Documento"),e.k0s(),e.j41(32,"th",21),e.EFF(33,"Nombre"),e.k0s(),e.j41(34,"th",21),e.EFF(35,"Apellido"),e.k0s(),e.j41(36,"th",21),e.EFF(37,"R\xe9gimen"),e.k0s(),e.j41(38,"th",21),e.EFF(39,"Tel\xe9fono"),e.k0s(),e.j41(40,"th",21),e.EFF(41,"Correo"),e.k0s(),e.j41(42,"th",21),e.EFF(43,"Profesi\xf3n"),e.k0s(),e.j41(44,"th",21),e.EFF(45,"Hospital"),e.k0s(),e.j41(46,"th",21),e.EFF(47,"Grupo Ocupacional"),e.k0s(),e.j41(48,"th",21),e.EFF(49,"Cargo"),e.k0s(),e.j41(50,"th",21),e.EFF(51,"Retiro"),e.k0s(),e.j41(52,"th",21),e.EFF(53,"Obs"),e.k0s()()(),e.j41(54,"tbody"),e.DNE(55,Pe,33,13,"tr",22),e.k0s()(),e.DNE(56,Ie,2,0,"ng-template",null,0,e.C5r),e.k0s()()(),e.DNE(58,Me,9,1,"ng-template",null,1,e.C5r)}2&i&&(e.R7$(10),e.SpI("Historial del Curso ",o.nameCurso,""),e.R7$(9),e.R50("ngModel",o.searchTerm),e.R7$(36),e.Y8G("ngForOf",o.postulacion))},dependencies:[C.Sq,C.bT,w.So,v.RN,v.m2,v.dh,h.me,h.BC,h.vS],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#4caf50}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider[_ngcontent-%COMP%]{background-color:#f44336}.slider.round[_ngcontent-%COMP%]{border-radius:24px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']})}}return n})()},{path:"solicitudes/:id/:idFormulario",component:Re}]}];var we=d(3887),De=d(9461);let Ge=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[C.MD,b.iI.forChild(ye),R.G,h.YN,h.X1,we.G,De.I,O.X4.pick(T)]})}}return n})()}}]);